function DoAdvancedSearch(){$("#ThisPageIndex").val("1");SubmitAdvancedSearch()}function SubmitAdvancedSearch(){$("#AdvancedSearchForm").submit()}function ClearFilters(){$("#AdvancedSearchForm .row input").val("");$("#AdvancedSearchForm .row select option:selected").prop("selected",!1);$("#AdvancedSearchBox .card-header .card-tools button").trigger("click");DoAdvancedSearch()}function openSearchboxIfNeeded(){var n=$("#AdvancedSearchBox").find('input[type="text"]').filter(function(){return $(this).val().trim()!=""}).length,t=$("#AdvancedSearchBox").find('input[type="numbers"]').filter(function(){return $(this).val().trim()!=""}).length,i=$("#AdvancedSearchBox").find("select:enabled").filter(function(){return $(this).val().trim()!=""}).length,r=n+i+t;r>0&&($("#AdvancedSearchBox").removeClass("collapsed-card"),$("#AdvancedSearchBox .card-header .card-tools button i").removeClass("fa-plus").addClass("fa-minus"),$("#AdvancedSearchBox .card-body").show())}function markCurrentSort(){var n=$("#PageOrder").val(),t=$("#PageOrderBy").val(),i=`<i class="fa fa-sort-${n=="asc"?"up":"down"} mr-2"></i>`;$(`.AdvancedGrid label[for=searchModel_${t}]`).append(i)}function changeStatusHtml(n){n.success?SubmitAdvancedSearch():toastr.error(n.message)}function removeRowHtml(n){n.success?$(`.AdvancedGrid tr[data-id="${n.id}"]`).fadeOut(300,function(){$(this).remove()}):toastr.error(n.message);$("#modal-delete").modal("hide")}function AjaxSubmit(n,t,i){url=`?handler=${n}`;$.ajax({type:"POST",url:url,headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},data:t}).fail(function(n){console.log("fail: ",n)}).done(function(t){i(t,n)})}typeof Dropzone!="undefined"&&(Dropzone.autoDiscover=!1);$(document).ready(function(){var i,n;let t={maxFilesize:1,dictRemoveFile:"حذف",addRemoveLinks:!0,success:function(n){var t=$(this).attr("element"),i=$(t).children("input.address-holder");let r=n.xhr.response.replaceAll('"',"");i.val(r)},init:function(){var t=$(this).attr("element"),n=$(t).children("input.address-holder"),i=$(n).val();if(i!==""){let t=this;t.displayExistingFile({name:"Filename",size:12345},$(n).val(),null,null,!1);$(".dz-image").addClass("initial")}},removedfile:function(n){var i=$(this).attr("element"),r=$(i).children("input.address-holder"),t;return $(r).val(""),(t=n.previewElement)!=null?t.parentNode.removeChild(n.previewElement):void 0}};$(".dropzone-file-area").length>0&&$.each($(".dropzone-file-area"),function(n,i){t.url=$(i).data("upload-address");$(i).dropzone(t)});toastr.options.rtl=!0;toastr.options.positionClass="toast-top-left";init();openSearchboxIfNeeded();markCurrentSort();i=$("#AdvancedSearchBox").find("[data-type='datetime']").find('input[type="text"]');$.each(i,(n,t)=>{var i=$(t).attr("id");$(t).MdPersianDateTimePicker({Trigger:"click",targetTextSelector:`#${i}`,targetDateSelector:`#${i}_Val`,ToDate:!0,EnableTimePicker:!1,Placement:"right",Format:"yyyy/MM/dd",GroupId:"",FromDate:!1,DisableBeforeToday:!1,Disabled:!1,IsGregorian:!1,EnglishNumber:!1})});$(".summernote").length>0&&(n=$(".summernote"),n.summernote({toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture"]],["view",["codeview","help"]],],callbacks:{onChange:function(t){n.val(n.summernote("isEmpty")?"":t);$("form").validate().element(n)}}}));$(".select2").length>0&&$.each($(".select2.ajax-load"),function(n,t){var i=$(this).data("url");$.ajax({url:i,type:"get",dataType:"json",success:function(n){$(t).select2({dir:"rtl",data:n})}})})});const init=()=>{var n=$("#loading-div").hide();$(document).ajaxStart(function(){n.show()}).ajaxStop(function(){n.hide()}).ajaxError(function(){toastr.error("خطایی رخ داده است.")})};$(document).on("click","ul.pagination li a",function(){if($(this).parent().hasClass("active")||$(this).parent().hasClass("disabled"))return!1;var n=$(this).attr("href").toLowerCase().match(/current=(.*)/)[1];return $("#ThisPageIndex").val(n),SubmitAdvancedSearch(),!1});$(".btn-delete-row").click(function(n){n.preventDefault();var t=$(this).data("id");$("#delete-id").val(t);$("#modal-delete").modal("show")});$('#AdvancedSearchBox input[type="text"],#AdvancedSearchBox input[type="number"]').keypress(function(n){if(n.which==13)return SubmitAdvancedSearch(),!1});$(document).on("click",".AdvancedGrid th.sortable",function(){var t=$("#PageOrder").val(),i=$("#PageOrderBy").val(),r=$(this).find("label").attr("for").split("_"),n=r[1];n==i?$("#PageOrder").val(t==="asc"?"desc":"asc"):($("#PageOrderBy").val(n),$("#PageOrder").val("desc"));SubmitAdvancedSearch()});$(document).on("click",".StatusBtn",function(){var n={id:$(this).data("id")},t=$(this).data("handler");return AjaxSubmit(t,n,changeStatusHtml),!1});$("#delete-row-button").click(function(){var n={id:$("#delete-id").val()};AjaxSubmit(Delete,n,removeRowHtml)});ajaxOnSuccess=n=>{if(!n.success){toastr.error(n.message);return}var t=n.message;(t==undefined||t==null||t=="")&&(t="عملیات با موفقیت انجام شد.");toastr.success(t);setTimeout(function(){location.href=n.url},500)};